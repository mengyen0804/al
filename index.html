<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸ“ é‡‡èŠæ—©é¤ é»é¤ç³»çµ±ãƒ»å¯æ„›èåˆç‰ˆ</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Noto Sans TC', sans-serif;
      background: linear-gradient(#fff7f0, #ffe6e6);
      padding: 20px;
      color: #4a3c3c;
      max-width: 800px;
      margin: auto;
      padding-bottom: 100px; /* ç‚ºå›ºå®šæŒ‰éˆ•ç•™ç©ºé–“ */
    }
    h1 {
      text-align: center;
      font-size: 6vw;
      color: #d44b79;
      background-color: #fff0f5;
      border-radius: 20px;
      padding: 15px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .section {
      background-color: #fff;
      border-radius: 16px;
      padding: 15px;
      margin-top: 20px;
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
    }
    h2 {
      font-size: 5vw;
      margin-bottom: 10px;
      color: #f27c9c;
    }
    .item {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      margin: 8px 0;
    }
    .item label {
      flex: 1 1 60%;
    }
    .item input[type="number"],
    .item select {
      margin-left: 10px;
      flex: 0 0 auto;
    }
    input[type="text"], select, input[type="number"] {
      padding: 6px 10px;
      border: 1px solid #ccc;
      border-radius: 10px;
      font-size: 3.5vw;
      max-width: 100%;
    }
    input[type="number"] {
      width: 60px;
    }
    .fixed-submit {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: #fff0f5;
      padding: 10px 0;
      box-shadow: 0 -2px 6px rgba(0,0,0,0.1);
      z-index: 999;
    }
    .fixed-submit button {
      background-color: #ff90b3;
      color: white;
      border: none;
      border-radius: 30px;
      padding: 15px 30px;
      font-size: 5vw;
      cursor: pointer;
      display: block;
      margin: auto;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    #total {
      text-align: center;
      font-size: 5vw;
      font-weight: bold;
      color: #d44b79;
      margin-top: 15px;
    }
    #result {
      text-align: center;
      margin-top: 20px;
      font-size: 2.5vw;
    }
    @media (min-width: 600px) {
      h1 { font-size: 28px; }
      h2 { font-size: 20px; }
      input, select { font-size: 16px; }
      .fixed-submit button, button { font-size: 18px; }
      #total { font-size: 20px; }
      #result { font-size: 16px; }
    }
  </style>
</head>
<body>
  <h1>ğŸ é‡‡èŠæ—©é¤ é»é¤ç³»çµ±ãƒ»å¯æ„›èåˆç‰ˆ ğŸ¥¤</h1>
  <form id="orderForm">
    <div class="section">
      <label>ğŸ‘¤ å§“åï¼š<input type="text" id="name" required /></label>
    </div>

    <div id="menu"></div>

    <div class="section">
      <label>ğŸ“ å‚™è¨»ï¼š<input type="text" id="note" placeholder="ä¾‹å¦‚ï¼šè¦è¾£æ¤’ã€è¦é†¬æ²¹" /></label>
    </div>

    <div id="total">ğŸ¡ ç¸½é‡‘é¡ï¼š$0</div>
<div class="section" id="preview" style="margin-top: 15px; font-size: 2vw; line-height: 1.6; color: #5a5a5a;"><strong>ğŸ›ï¸ æ‚¨ç›®å‰é¸æ“‡ï¼š</strong><br><div id="previewList" style="max-height: 120px; overflow-y: auto; padding-right: 6px;"></div></div>
    <p id="result"></p>
  </form>
  <div class="fixed-submit">
    <button type="submit" form="orderForm">âœ¨ é€å‡ºè¨‚å–® âœ¨</button>
  </div>
  <script>
    const menuData = {
      "ğŸ åå¸é¡": {
        "è‰è“åå¸": 20, "å¥¶æ²¹åå¸": 20, "èŠ±ç”Ÿåå¸": 20, "å·§å…‹åŠ›åå¸": 20,
        "åå¸å¤¾è›‹": 30, "ç«è…¿è›‹åå¸": 40, "é®ªé­šè›‹åå¸": 45, "è‚‰é¬†è›‹åå¸": 45,
        "æ³•åœ‹åå¸": 50, "æ¼¢å ¡è‚‰å¤¾è›‹åå¸": 50
      },
      "ğŸ¥ª åšç‰‡é¡": {
        "èŠ±ç”Ÿåšç‰‡": 35, "è‰è“åšç‰‡": 35, "å¥¶æ²¹åšç‰‡": 35, "å·§å…‹åŠ›åšç‰‡": 35,
        "å¥¶é…¥åšç‰‡": 40, "è’œå‘³åšç‰‡": 40, "èµ·å¸åšç‰‡": 40, "é®ªé­šåšç‰‡": 45
      },
      "ğŸ™ é£¯ç³° / å£½å¸é¡": {
        "ç‰¹è£½ç´ é£Ÿé£¯ç³°": 45, "ç‰¹è£½ç´«ç±³é£¯ç³°": 50, "æ‹›ç‰Œç´«ç±³ç‡’è‚‰é£¯ç³°": 65
      },
      "ğŸ¥— ä¸‰æ˜æ²»é¡": {
        "å…¨éº¥ç´ ä¸‰æ˜æ²»": 30, "è‚‰é¬†ä¸‰æ˜æ²»": 30, "é®ªé­šä¸‰æ˜æ²»": 30, "ç«è…¿ä¸‰æ˜æ²»": 30,
        "èµ·å¸æ°´æœä¸‰æ˜æ²»": 55, "é®ªé­šç¸½åŒ¯ä¸‰æ˜æ²»": 55, "æ‹›ç‰Œç‡’è‚‰ç¸½åŒ¯ä¸‰æ˜æ²»": 60
      },
      "ğŸ³ è›‹é¤…é¡": {
        "å¤æ—©å‘³ç¾…è””ç³•": 35, "åŸå‘³è›‹é¤…": 30, "é’è”¥è›‹é¤…": 35, "èŠéº»è›‹é¤…": 40,
        "ç«è…¿è›‹é¤…": 40, "è‚‰é¬†è›‹é¤…": 45, "é®ªé­šè›‹é¤…": 45, "èµ·å¸è›‹é¤…": 45,
        "è”¬èœè›‹é¤…": 45, "ç‰ç±³è›‹é¤…": 45, "åŸ¹æ ¹è›‹é¤…": 50, "æ‹›ç‰Œç‡’è‚‰è›‹é¤…": 60
      },
      "ğŸ¥¤ é£²æ–™é¡": {
        "ç´…èŒ¶å°": 20, "ç´…èŒ¶å¤§": 40, "ç´…èŒ¶è±†æ¼¿å°": 20, "ç´…èŒ¶è±†æ¼¿å¤§": 40,
        "é¤Šç”Ÿé»ƒè±†æ¼¿å°": 20, "é¤Šç”Ÿé»ƒè±†å°‡å¤§": 40, "é¤Šç”Ÿé»‘è±†æ¼¿å°": 25, "é¤Šç”Ÿé»‘è±†æ¼¿å¤§": 50,
        "å±±è—¥äº”ç©€ç±³æ¼¿å°": 25, "å±±è—¥äº”ç©€ç±³æ¼¿å¤§": 50, "é®®å¥¶ç´…èŒ¶å°": 25, "é®®å¥¶ç´…èŒ¶å¤§": 50,
        "å’–å•¡ç‰›å¥¶å°": 40, "å’–å•¡ç‰›å¥¶å¤§": 80
      }
    };

    const menuDiv = document.getElementById("menu");
    const totalDisplay = document.getElementById("total");

    function renderMenu() {
      for (const [category, items] of Object.entries(menuData)) {
        const section = document.createElement("div");
        section.className = "section";
        section.style.border = "2px solid transparent";
        section.style.borderImage = "linear-gradient(to right, #ffd6e8, #ffe9b6) 1";

        const title = document.createElement("h2");
        title.textContent = category;
        title.style.cursor = "pointer";
        title.addEventListener("click", () => {
          const items = section.querySelectorAll(".item, div[style*='justify-content']");
          items.forEach(el => el.style.display = el.style.display === "none" ? "" : "none");
        });
        section.appendChild(title);

        const quantityHeader = document.createElement("div");
        quantityHeader.style.display = "flex";
        quantityHeader.style.justifyContent = "space-between";
        quantityHeader.style.fontSize = "4vw";
        quantityHeader.style.textDecoration = "underline";
        quantityHeader.style.background = "linear-gradient(to right, #fff3f3, #ffe4e1)";
        quantityHeader.style.padding = "4px 8px";
        quantityHeader.style.borderRadius = "10px";
        quantityHeader.style.margin = "4px 0 8px";
        quantityHeader.style.fontWeight = "bold";
        quantityHeader.style.color = "#888";

        const leftLabel = document.createElement("span");
        leftLabel.textContent = "å“é …";
        const rightLabel = document.createElement("span");
        rightLabel.textContent = category.includes("é£²æ–™") ? "æ•¸é‡ / å†°æº«" : "æ•¸é‡";

        quantityHeader.appendChild(leftLabel);
        quantityHeader.appendChild(rightLabel);
        section.appendChild(quantityHeader);

        for (const [item, price] of Object.entries(items)) {
          const wrapper = document.createElement("div");
          wrapper.className = "item";

          const label = document.createElement("label");
          label.textContent = `${item} - $${price}`;
          label.style.fontWeight = "bold";
          label.style.fontSize = "3.5vw";

          const quantity = document.createElement("input");
          quantity.type = "number";
          quantity.min = 0;
          quantity.max = 10;
          quantity.value = 0;
          quantity.setAttribute("data-price", price);
          quantity.setAttribute("data-item", item);
          quantity.addEventListener("change", updateTotal);

          wrapper.appendChild(label);
          wrapper.appendChild(quantity);

          if (category.includes("é£²æ–™")) {
            const select = document.createElement("select");
            select.innerHTML = `
              <option value="">é¸å†°/æº«</option>
              <option value="å†°">å†°</option>
              <option value="æº«">æº«</option>`;
            select.setAttribute("data-item", item);
            wrapper.appendChild(select);
          }

          section.appendChild(wrapper);
        }

        menuDiv.appendChild(section);
      }
    }

    function updateTotal() {
      let total = 0;
      document.querySelectorAll('input[type="number"]').forEach(input => {
        const qty = parseInt(input.value) || 0;
        const price = parseInt(input.getAttribute("data-price"));
        total += qty * price;
      });
      totalDisplay.textContent = `ğŸ¡ ç¸½é‡‘é¡ï¼š$${total}`;
    }

    renderMenu();

// è‡ªå‹•é è¨­é£²æ–™ç‚ºå†°
window.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll("select").forEach(select => {
    if (select.options.length > 1) select.value = "å†°";
  });
});

// é€å‡ºè¨‚å–®æ™‚ç‰¹æ•ˆå‹•ç•«
const orderForm = document.getElementById("orderForm");
orderForm.addEventListener("submit", (e) => {
  const button = document.querySelector(".fixed-submit button");
  button.style.transform = "scale(1.1)";
  setTimeout(() => {
    button.style.transform = "scale(1)";
  }, 150);

  // é£„æµ® Emoji æ•ˆæœ
  const emojis = ["ğŸ¥ª", "ğŸ³", "ğŸ§‹", "ğŸ", "ğŸ™"];
  const emoji = document.createElement("div");
  emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
  emoji.style.position = "fixed";
  emoji.style.left = Math.random() * 80 + "%";
  emoji.style.bottom = "40px";
  emoji.style.fontSize = "24px";
  emoji.style.opacity = 1;
  emoji.style.transition = "all 1s ease-out";
  document.body.appendChild(emoji);
  setTimeout(() => {
    emoji.style.transform = "translateY(-100px)";
    emoji.style.opacity = 0;
  }, 50);
  setTimeout(() => emoji.remove(), 1200);
});

// é«˜äº®å·²é¸é … + é¡¯ç¤ºå°è¨ˆ
function highlightAndSubtotal() {
  document.querySelectorAll('.item').forEach(wrapper => {
    const input = wrapper.querySelector('input[type="number"]');
    const qty = parseInt(input.value);
    const price = parseInt(input.getAttribute("data-price"));
    const subtotalLabel = wrapper.querySelector('.subtotal');
    if (qty > 0) {
      wrapper.style.background = "#fff7f7";
      if (!subtotalLabel) {
        const span = document.createElement("span");
        span.className = "subtotal";
        span.style.marginLeft = "10px";
        span.style.color = "#e55";
        span.textContent = `å°è¨ˆï¼š$${qty * price}`;
        wrapper.appendChild(span);
      } else {
        subtotalLabel.textContent = `å°è¨ˆï¼š$${qty * price}`;
      }
    } else {
      wrapper.style.background = "transparent";
      if (subtotalLabel) subtotalLabel.remove();
    }
  });
}

// å³æ™‚ç¸½é‡‘é¡ & é«˜äº®æ›´æ–°
function updateTotal() {
  let total = 0;
  document.querySelectorAll('input[type="number"]').forEach(input => {
    const qty = parseInt(input.value) || 0;
    const price = parseInt(input.getAttribute("data-price"));
    total += qty * price;
  });
  totalDisplay.textContent = `ğŸ¡ ç¸½é‡‘é¡ï¼š$${total}`;
  highlightAndSubtotal();
updatePreviewList();
}
  
// è‡ªå‹•æ’­æ”¾èªéŸ³æ­¡è¿è©
window.addEventListener("load", () => {
  if ('speechSynthesis' in window) {
    const msg = new SpeechSynthesisUtterance("æ­¡è¿å…‰è‡¨é‡‡èŠæ—©é¤");
    msg.lang = "zh-TW";
    msg.rate = 1;
    window.speechSynthesis.speak(msg);
  }
});
function removeItem(name) {
  document.querySelectorAll(`input[data-item='${name}']`).forEach(input => input.value = 0);
  updateTotal();
}

// å³æ™‚æ›´æ–°è¨‚å–®é è¦½æ¸…å–®
function updatePreviewList() {
  const preview = document.getElementById("previewList");
  let lines = [];
  document.querySelectorAll(".item").forEach(wrapper => {
    const input = wrapper.querySelector('input[type="number"]');
    const qty = parseInt(input.value);
    if (qty > 0) {
      const name = input.getAttribute("data-item");
      const price = parseInt(input.getAttribute("data-price"));
      const select = wrapper.querySelector("select");
      const temp = select && select.value ? `ï¼ˆ${select.value}ï¼‰` : "";
      lines.push(`<span>${name}${temp} x${qty}ï¼ˆ$${price * qty}ï¼‰ <button onclick=\"removeItem('${name}')\" style=\"margin-left:10px;font-size:2vw;background:#ffdddd;border:none;border-radius:6px;\">âŒ</button></span>`);
    }
  });
  preview.innerHTML = lines.length ? lines.join("<br>") : "ï¼ˆå°šæœªé¸æ“‡é¤é»ï¼‰";
}
</script>
</body>
</html>
